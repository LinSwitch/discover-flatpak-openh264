# –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ OpenH264 –¥–ª—è Flatpak —á–µ—Ä–µ–∑ Tor + Docker

---

## üåç English Version

‚û°Ô∏è **Read this guide in English:**  
**[Bypassing the OpenH264 Block for Flatpak Using Tor + Docker](./README.en.md)**

---

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö —Å–µ—Ä–≤–µ—Ä Cisco, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ Flatpak —Å–∫–∞—á–∏–≤–∞–µ—Ç OpenH264, **–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω**.
–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª—é–±–æ–µ Flatpak-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Discover –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞:

```
403 Forbidden
```
–≠—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ Linux –∏–ª–∏ KDE ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç **—Å–µ—Ç–µ–≤–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**.
–í —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç —Ñ–∞–π–ª–æ–≤, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π –∫–æ–º–∞–Ω–¥—ã –∏–∑ –≤–∏–¥–µ–æ, –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Tor-–ø—Ä–æ–∫—Å–∏ –≤ Docker.

---

## üì¶ –ß—Ç–æ –∑–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è

* **Dockerfile** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Tor –Ω–∞ Alpine
* **torrc** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Tor —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–æ—Å—Ç–æ–≤

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Docker
* Linux (Arch, KDE, Steam Deck Desktop Mode –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ —Å Flatpak + Discover)
* Python 3 (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞)

---

# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

## 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker

Arch / SteamOS / Manjaro:

```bash
sudo pacman -S docker
sudo systemctl enable --now docker
```

## 2. –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker

```bash
sudo usermod -aG docker $USER
newgrp docker
```

---

## 3. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/LinSwitc/discover-flatpak-openh264
cd discover-flatpak-openh264
```

*(–ï—Å–ª–∏ –≤–∏–¥–µ–æ –≤—ã —Å–º–æ—Ç—Ä–µ–ª–∏ ‚Äî —ç—Ç–æ —Ç–µ –∂–µ –¥–≤–∞ —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–∫–∞—á–∏–≤–∞–ª–∏ –≤—Ä—É—á–Ω—É—é.)*

---

## 4. –ü–æ–ª—É—á–∞–µ–º —Å–≤–µ–∂–∏–µ Tor-–º–æ—Å—Ç—ã

–ú–æ—Å—Ç—ã –±—ã—Å—Ç—Ä–æ —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç ‚Äî –±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–¥–µ—Å—å:

üì° **Telegram-–±–æ—Ç:** `@GetBridgesBot`

–í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `torrc`:

```
UseBridges 1
ClientTransportPlugin obfs4 exec /usr/bin/lyrebird
Bridge obfs4 ...  # –≤–∞—à–∞ —Å—Ç—Ä–æ–∫–∞
```

---

## 5. –°–æ–±–∏—Ä–∞–µ–º Tor-–æ–±—Ä–∞–∑

```bash
docker build -t tor-proxy .
```

---

## 6. –ó–∞–ø—É—Å–∫–∞–µ–º Tor-–ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 9050

```bash
docker run -d --name tor-proxy -p 127.0.0.1:9050:9050 tor-proxy
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
curl --socks5 127.0.0.1:9050 https://check.torproject.org/api/ip
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å {"IsTor":true,"IP":"–∞–¥—Ä–µ—Å"}.

---

# üîë –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ OpenH264

## 7. –°–∫–∞—á–∏–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É Cisco (—á–µ—Ä–µ–∑ Tor). 
–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è OpenH264 ‚Äî **2.5.1**.  
–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º Flatpak –Ω–∞—á–Ω—ë—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é ‚Äî **–∑–∞–º–µ–Ω–∏—Ç–µ –µ—ë –≤ URL** –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—É—é.

–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π:  
https://github.com/cisco/openh264/releases

```bash
curl -x socks5h://127.0.0.1:9050 -O http://ciscobinary.openh264.org/libopenh264-2.5.1-linux64.7.so.signed.md5.txt
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –∑–∞–≥–ª—É—à–∫–∞:

```bash
cat libopenh264-2.5.1-linux64.7.so.signed.md5.txt
```

–ï—Å–ª–∏ —Ç–∞–º MD5-—Ö—ç—à, –∞ –Ω–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî –≤—Å—ë –æ–∫.

---

## 8. –°–∫–∞—á–∏–≤–∞–µ–º —Å–∞–º –∞—Ä—Ö–∏–≤

```bash
curl -x socks5h://127.0.0.1:9050 -O http://ciscobinary.openh264.org/libopenh264-2.5.1-linux64.7.so.bz2
```

---

## 9. –ó–∞–ø—É—Å–∫–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä

Flatpak –∫–∞—á–∞–µ—Ç OpenH264 **—Ç–æ–ª—å–∫–æ –ø–æ HTTP**, –ø–æ—ç—Ç–æ–º—É –ø–æ–¥–Ω–∏–º–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

```bash
sudo python3 -m http.server 80 -b 127.0.0.1
```

---

## 10. –ü–æ–¥–º–µ–Ω–∞ –¥–æ–º–µ–Ω–∞ —á–µ—Ä–µ–∑ /etc/hosts

–û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª:

```bash
sudo nano /etc/hosts
```

–î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É:

```
127.0.0.1  ciscobinary.openh264.org
```

–¢–µ–ø–µ—Ä—å Flatpak –±—É–¥–µ—Ç –¥—É–º–∞—Ç—å, —á—Ç–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

---

## üéâ 11. –°—Ç–∞–≤–∏–º –ª—é–±–æ–µ Flatpak-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤—Å—ë, —á—Ç–æ —É–≥–æ–¥–Ω–æ:

```bash
flatpak install org.videolan.VLC
```

Discover —Ç–æ–∂–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫—É 403.

## 12. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
   - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (`Ctrl+C`),
   - —É–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –∏–∑ `/etc/hosts`.

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ—Å—Ç–æ–≤ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)
```bash
docker cp tor-proxy:/etc/tor/torrc torrc
# –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ torrc
docker cp torrc tor-proxy:/etc/tor/torrc
docker restart tor-proxy
```

## üì∫ –í–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
[–û—à–∏–±–∫–∞ 403 –≤ Discover? –ö–∞–∫ –æ–±–æ–π—Ç–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É OpenH264 —á–µ—Ä–µ–∑ Tor –≤ Docker](https://youtu.be/wB9s7lQ5Uz8)

